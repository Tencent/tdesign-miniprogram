<view class="{{chatItemClass}}" bindlongpress="handleLongPress">
  <view wx:if="{{showAvatar}}" class="{{COMPONENT_NAME + '__avatar'}}">
    <view class="{{COMPONENT_NAME + '__avatar__box'}}">
      <view wx:if="{{avatar}}">
        <image src="{{avatar}}" class="{{COMPONENT_NAME + '__avatar-image'}}"></image>
      </view>
    </view>
  </view>
  <view class="{{contentClasses}}">
    <view wx:if="{{showName || showDateTime}}" class="{{COMPONENT_NAME + '__base'}}">
      <text wx:if="{{showName}}" class="{{COMPONENT_NAME + '__name'}}">{{name}}</text>
      <text wx:if="{{datetime}}" class="{{COMPONENT_NAME + '__time'}}">{{datetime}}</text>
    </view>
    <block wx:if="{{message.status === 'pending'}}">
      <view style="width: 100%">
        <chat-loading animation="{{animation}}"></chat-loading>
      </view>
    </block>
    <block wx:else>
      <view class="{{COMPONENT_NAME + '__detail'}}">
        <!-- 属性传值优先级高于content插槽 -->
        <block wx:if="{{message && message.content}}">
          <block wx:for="{{message.content}}" wx:key="index">
            <chat-thinking wx:if="{{item.type === 'thinking'}}" content="{{item.data}}"
              role="{{message.role}}"></chat-thinking>
            <chat-content wx:elif="{{item.type === 'text' || item.type === 'markdown'}}" content="{{item}}"
              role="{{message.role}}"></chat-content>
          </block>
        </block>
        <block wx:else>
          <slot name="content" />
        </block>
      </view>
    </block>
    <view wx:if="{{message && message.role === 'assistant'}}" class="{{COMPONENT_NAME + '__actionbar-slot'}}">
      <slot name="actionbar"></slot>
    </view>
  </view>
</view>
