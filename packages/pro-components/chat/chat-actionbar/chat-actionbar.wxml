<wxs src="../../../components/common/utils.wxs" module="_" />
<!-- TODO: api 可选项没有 longpress，这部分是否可移除？ -->
<view
  class="class {{[classPrefix, placement==='longpress' ? classPrefix+'__inner-popover' : '', computedPlacement]}}"
  style="{{_._style([style, customStyle])}}"
>
  <view class="{{[classPrefix+'__inner',classPrefix+'__inner-column']}}">
    <view class="{{[classPrefix+'__item',classPrefix+'__item-left']}}">
      <slot name="left"></slot>
    </view>
    <block wx:for="{{actions}}" wx:for-item="item" wx:for-index="index" wx:key="index">
      <!-- 分享按钮使用 button 标签 -->
      <button
        wx:if="{{item.name === 'share'}}"
        data-name="{{item.name}}"
        class="{{[classPrefix+'__item', item.isActive ? classPrefix+'__item-active' : '']}}"
        open-type="{{content ? 'share' : 'none'}}"
        data-chat-id="{{chatId}}"
        bindtap="handelActionClick"
      >
        <t-icon wx:if="{{!item.isActive}}" name="{{iconMap[item.name]}}" size="40rpx" />
        <t-icon wx:else name="{{iconActiveMap[item.name]}}" size="40rpx" />
      </button>

      <!-- 其他按钮使用 view 标签 -->
      <view
        wx:else
        data-name="{{item.name}}"
        class="{{[classPrefix+'__item', item.isActive ? classPrefix+'__item-active' : '']}}"
        bindtap="handelActionClick"
      >
        <t-icon wx:if="{{!item.isActive}}" name="{{iconMap[item.name]}}" size="40rpx" />
        <t-icon wx:else name="{{iconActiveMap[item.name]}}" size="40rpx" />
      </view>
    </block>
  </view>
</view>
