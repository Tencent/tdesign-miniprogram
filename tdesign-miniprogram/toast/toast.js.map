{"version":3,"sources":["../src/toast/toast.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,cAAc,EAAE,WAAW,EAAE,MAAM,qBAAqB,CAAC;AAElE,OAAO,MAAM,MAAM,kBAAkB,CAAC;AACtC,OAAO,KAAK,MAAM,SAAS,CAAC;AAE5B,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,CAAC;AAC1B,MAAM,IAAI,GAAG,GAAG,MAAM,QAAQ,CAAC;AAG/B,IAAqB,KAAK,GAA1B,MAAqB,KAAM,SAAQ,cAAc;IAAjD;;QACE,oBAAe,GAAG,CAAC,SAAS,CAAC,CAAC;QAE9B,YAAO,GAAG;YACR,aAAa,EAAE,IAAI,EAAE,sBAAsB;SAC5C,CAAC;QAEF,cAAS,GAAkB,IAAI,CAAC;QAEhC,gBAAW,GAAkB,IAAI,CAAC;QAElC,gBAAW,GAA2B;YACpC,OAAO,EAAE,SAAS;YAClB,OAAO,EAAE,cAAc;YACvB,IAAI,EAAE,cAAc;SACrB,CAAC;QAEF,SAAI,GAAG;YACL,QAAQ,EAAE,KAAK;YACf,IAAI,EAAE,KAAK;YACX,WAAW,EAAE,IAAI;YACjB,WAAW,EAAE,EAAE;SAChB,CAAC;QAEF,eAAU,GAAG,KAAK,CAAC;IA8CrB,CAAC;IA5CC,IAAI,CAAC,OAAqB;QACxB,IAAI,IAAI,CAAC,SAAS;YAAE,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACjD,IAAI,IAAI,CAAC,WAAW;YAAE,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACrD,MAAM,WAAW,GACf,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,KAAY,CAAC,KAAK,CAAC,CAAC;YACjE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,KAAY,CAAC;YACzC,CAAC,CAAC,EAAE,CAAC;QAET,MAAM,IAAI,mCACL,OAAO,KACV,IAAI,EAAE,IAAI,EACV,WAAW,EACX,QAAQ,EAAE,IAAI,GACf,CAAC;QACF,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACnB,IAAI,CAAC,SAAS,GAAG,UAAU,CAAC,GAAG,EAAE;YAC/B,IAAI,CAAC,KAAK,EAAE,CAAC;QACf,CAAC,EAAE,QAAe,CAAC,CAAC;IACtB,CAAC;IAED,KAAK;QACH,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;QAC9B,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC,GAAG,EAAE;YACjC,IAAI,CAAC,OAAO,CAAC;gBACX,QAAQ,EAAE,KAAK;aAChB,CAAC,CAAC;QACL,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,SAAS,EAAE,CAAC;IACnB,CAAC;IAED,SAAS;QACP,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAC/B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;SACzB;QACD,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAC7B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;SACvB;IACH,CAAC;CACF,CAAA;AAtEoB,KAAK;IADzB,WAAW,EAAE;GACO,KAAK,CAsEzB;eAtEoB,KAAK","file":"toast.js","sourcesContent":["import { SuperComponent, wxComponent } from '../common/src/index';\nimport { TdToastProps } from './type';\nimport config from '../common/config';\nimport Props from './props';\n\nconst { prefix } = config;\nconst name = `${prefix}-toast`;\n\n@wxComponent()\nexport default class Toast extends SuperComponent {\n  externalClasses = ['t-class'];\n\n  options = {\n    multipleSlots: true, // 在组件定义时的选项中启用多slot支持\n  };\n\n  hideTimer: number | null = null;\n\n  removeTimer: number | null = null;\n\n  typeMapIcon: Record<string, string> = {\n    loading: 'loading',\n    success: 'check-circle',\n    fail: 'error-circle',\n  };\n\n  data = {\n    inserted: false,\n    show: false,\n    classPrefix: name,\n    typeMapIcon: '',\n  };\n\n  properties = Props;\n\n  show(options: TdToastProps) {\n    if (this.hideTimer) clearTimeout(this.hideTimer);\n    if (this.removeTimer) clearTimeout(this.removeTimer);\n    const typeMapIcon =\n      Object.keys(this.typeMapIcon).indexOf(options?.theme as any) !== -1\n        ? this.typeMapIcon[options?.theme as any]\n        : '';\n\n    const data = {\n      ...options,\n      show: true,\n      typeMapIcon,\n      inserted: true,\n    };\n    const { duration } = data;\n    this.setData(data);\n    this.hideTimer = setTimeout(() => {\n      this.clear();\n    }, duration as any);\n  }\n\n  clear() {\n    this.setData({ show: false });\n    this.removeTimer = setTimeout(() => {\n      this.setData({\n        inserted: false,\n      });\n    }, 300);\n  }\n\n  detached() {\n    this.destroyed();\n  }\n\n  destroyed() {\n    if (this.removeTimer) {\n      clearTimeout(this.removeTimer);\n      this.removeTimer = null;\n    }\n    if (this.hideTimer) {\n      clearTimeout(this.hideTimer);\n      this.hideTimer = null;\n    }\n  }\n}\n"]}