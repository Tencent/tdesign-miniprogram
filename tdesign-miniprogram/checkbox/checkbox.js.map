{"version":3,"sources":["../src/checkbox/checkbox.ts"],"names":[],"mappings":"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","file":"checkbox.js","sourcesContent":["import { SuperComponent, wxComponent } from '../common/src/index';\nimport config from '../common/config';\nimport Props from './props';\n\nconst { prefix } = config;\nconst classPrefix = `${prefix}-checkbox`;\n@wxComponent()\nexport default class CheckBox extends SuperComponent {\n  externalClasses = [\n    `${prefix}-class`,\n    `${prefix}-class-label`,\n    `${prefix}-class-icon`,\n    `${prefix}-class-content`,\n    `${prefix}-class-border`,\n  ];\n\n  relations = {\n    '../checkbox-group/checkbox-group': {\n      type: 'ancestor' as 'ancestor',\n    },\n  };\n\n  options = {\n    multipleSlots: true,\n  };\n\n  properties = {\n    ...Props,\n    defaultChecked: {\n      type: null,\n      value: undefined,\n    },\n  };\n\n  // 组件的内部数据\n  data = {\n    classPrefix,\n    prefix,\n    active: false,\n    halfChecked: false,\n    optionLinked: false,\n    canCancel: false,\n  };\n\n  lifetimes = {\n    attached() {\n      this.initStatus();\n    },\n  };\n\n  observers = {\n    checked: function (isChecked) {\n      this.initStatus();\n      this.setData({\n        active: isChecked,\n      });\n    },\n  };\n\n  controlledProps = [\n    {\n      key: 'checked',\n      event: 'change',\n    },\n  ];\n\n  /* Methods */\n  methods = {\n    onChange(e) {\n      const { disabled, readonly } = this.data;\n      if (disabled || readonly) return;\n      const { target } = e.currentTarget.dataset;\n      const { contentDisabled } = this.data;\n      if (target === 'text' && contentDisabled) {\n        return;\n      }\n      const { value, active, checkAll, optionLinked, canCancel } = this.data;\n      const item = { name: value, checked: !active, checkAll };\n      const [parent] = this.getRelationNodes('../checkbox-group/checkbox-group');\n      if (parent) {\n        if (checkAll || optionLinked) {\n          parent.handleCheckAll({\n            type: 'slot',\n            checked: !active || (this.data.halfChecked && !canCancel),\n            option: !checkAll,\n            name: value,\n          });\n        } else {\n          parent.updateValue(item);\n        }\n      } else if (checkAll || optionLinked) {\n        this.triggerEvent('toggleAll', {\n          type: 'not-slot',\n          checked: !active || (this.data.halfChecked && !canCancel),\n          option: !checkAll,\n          name: value,\n        });\n      } else {\n        this._trigger('change', { checked: !active });\n        // this.triggerEvent('change', !active);\n        // this.toggle();\n      }\n    },\n    initStatus() {\n      const { optionLinked, indeterminate } = this.data;\n      if (!optionLinked) {\n        this.setData({\n          halfChecked: indeterminate,\n        });\n      }\n    },\n    setCancel(cancel: boolean) {\n      this.setData({\n        canCancel: cancel,\n      });\n    },\n    setDisabled(disabled: Boolean) {\n      this.setData({\n        disabled: this.data.disabled || disabled,\n      });\n    },\n\n    // 半选\n    changeCheckAllHalfStatus(active: boolean) {\n      this.setData({\n        halfChecked: active,\n      });\n    },\n    // group option\n    setOptionLinked(linked: Boolean) {\n      this.setData({\n        optionLinked: linked,\n      });\n    },\n  };\n}\n"]}