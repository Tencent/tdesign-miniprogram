{"version":3,"sources":["../src/collapse/collapse.ts"],"names":[],"mappings":"","file":"collapse.d.ts","sourcesContent":["import TComponent from '../common/component';\nimport config from '../common/config';\n\nconst { prefix } = config;\nconst name = `${prefix}-collapse`;\n\nTComponent({\n  options: {\n    addGlobalClass: true,\n  },\n  externalClasses: [`${prefix}-class`],\n\n  relations: {\n    '../collapse-panel/collapse-panel': {\n      type: 'descendant',\n      linked(this, target: WechatMiniprogram.Component.TrivialInstance) {\n        this.children.push(target);\n      },\n      unlinked(this, target: WechatMiniprogram.Component.TrivialInstance) {\n        this.children = this.children.filter((item) => item !== target);\n      },\n    },\n  },\n\n  properties: {\n    value: {\n      type: null,\n      observer(this) {\n        this.updateExpanded();\n      },\n    },\n    accordion: {\n      type: Boolean,\n      observer(this) {\n        this.updateExpanded();\n      },\n      value: false,\n    },\n    border: {\n      type: Boolean,\n      value: true,\n    },\n  },\n\n  data: {\n    classPrefix: name,\n  },\n\n  methods: {\n    created() {\n      this.children = [];\n    },\n    updateExpanded() {\n      this.children = this.getRelationNodes('../collapse-panel/collapse-panel');\n      this.children.forEach((child: WechatMiniprogram.Component.TrivialInstance) => {\n        child.updateExpanded();\n      });\n    },\n    switch(name: any = null, expanded: any = null) {\n      const { accordion, value }: any = this.properties;\n      const changeItem = name;\n      if (!accordion) {\n        name = expanded\n          ? (value || []).concat(name)\n          : (value || []).filter((activeName) => activeName !== name);\n      } else {\n        name = expanded ? name : '';\n      }\n      if (expanded) {\n        this.triggerEvent('open', changeItem);\n      } else {\n        this.triggerEvent('close', changeItem);\n      }\n      this.triggerEvent('change', name);\n      this.triggerEvent('input', name);\n    },\n  },\n});\n"]}