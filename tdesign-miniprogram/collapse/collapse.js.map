{"version":3,"sources":["../src/collapse/collapse.ts"],"names":[],"mappings":"AAAA,OAAO,UAAU,MAAM,qBAAqB,CAAC;AAC7C,OAAO,MAAM,MAAM,kBAAkB,CAAC;AAEtC,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,CAAC;AAC1B,MAAM,IAAI,GAAG,GAAG,MAAM,WAAW,CAAC;AAElC,UAAU,CAAC;IACT,OAAO,EAAE;QACP,cAAc,EAAE,IAAI;KACrB;IACD,eAAe,EAAE,CAAC,GAAG,MAAM,QAAQ,CAAC;IAEpC,SAAS,EAAE;QACT,kCAAkC,EAAE;YAClC,IAAI,EAAE,YAAY;YAClB,MAAM,CAAO,MAAmD;gBAC9D,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC7B,CAAC;YACD,QAAQ,CAAO,MAAmD;gBAChE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC;YAClE,CAAC;SACF;KACF;IAED,UAAU,EAAE;QACV,KAAK,EAAE;YACL,IAAI,EAAE,IAAI;YACV,QAAQ;gBACN,IAAI,CAAC,cAAc,EAAE,CAAC;YACxB,CAAC;SACF;QACD,SAAS,EAAE;YACT,IAAI,EAAE,OAAO;YACb,QAAQ;gBACN,IAAI,CAAC,cAAc,EAAE,CAAC;YACxB,CAAC;YACD,KAAK,EAAE,KAAK;SACb;QACD,MAAM,EAAE;YACN,IAAI,EAAE,OAAO;YACb,KAAK,EAAE,IAAI;SACZ;KACF;IAED,IAAI,EAAE;QACJ,WAAW,EAAE,IAAI;KAClB;IAED,OAAO,EAAE;QACP,OAAO;YACL,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACrB,CAAC;QACD,cAAc;YACZ,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,gBAAgB,CAAC,kCAAkC,CAAC,CAAC;YAC1E,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,KAAkD,EAAE,EAAE;gBAC3E,KAAK,CAAC,cAAc,EAAE,CAAC;YACzB,CAAC,CAAC,CAAC;QACL,CAAC;QACD,MAAM,CAAC,OAAY,IAAI,EAAE,WAAgB,IAAI;YAC3C,MAAM,EAAE,SAAS,EAAE,KAAK,EAAE,GAAQ,IAAI,CAAC,UAAU,CAAC;YAClD,MAAM,UAAU,GAAG,IAAI,CAAC;YACxB,IAAI,CAAC,SAAS,EAAE;gBACd,IAAI,GAAG,QAAQ;oBACb,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC;oBAC5B,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,UAAU,EAAE,EAAE,CAAC,UAAU,KAAK,IAAI,CAAC,CAAC;aAC/D;iBAAM;gBACL,IAAI,GAAG,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;aAC7B;YACD,IAAI,QAAQ,EAAE;gBACZ,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;aACvC;iBAAM;gBACL,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;aACxC;YACD,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;YAClC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QACnC,CAAC;KACF;CACF,CAAC,CAAC","file":"collapse.js","sourcesContent":["import TComponent from '../common/component';\nimport config from '../common/config';\n\nconst { prefix } = config;\nconst name = `${prefix}-collapse`;\n\nTComponent({\n  options: {\n    addGlobalClass: true,\n  },\n  externalClasses: [`${prefix}-class`],\n\n  relations: {\n    '../collapse-panel/collapse-panel': {\n      type: 'descendant',\n      linked(this, target: WechatMiniprogram.Component.TrivialInstance) {\n        this.children.push(target);\n      },\n      unlinked(this, target: WechatMiniprogram.Component.TrivialInstance) {\n        this.children = this.children.filter((item) => item !== target);\n      },\n    },\n  },\n\n  properties: {\n    value: {\n      type: null,\n      observer(this) {\n        this.updateExpanded();\n      },\n    },\n    accordion: {\n      type: Boolean,\n      observer(this) {\n        this.updateExpanded();\n      },\n      value: false,\n    },\n    border: {\n      type: Boolean,\n      value: true,\n    },\n  },\n\n  data: {\n    classPrefix: name,\n  },\n\n  methods: {\n    created() {\n      this.children = [];\n    },\n    updateExpanded() {\n      this.children = this.getRelationNodes('../collapse-panel/collapse-panel');\n      this.children.forEach((child: WechatMiniprogram.Component.TrivialInstance) => {\n        child.updateExpanded();\n      });\n    },\n    switch(name: any = null, expanded: any = null) {\n      const { accordion, value }: any = this.properties;\n      const changeItem = name;\n      if (!accordion) {\n        name = expanded\n          ? (value || []).concat(name)\n          : (value || []).filter((activeName) => activeName !== name);\n      } else {\n        name = expanded ? name : '';\n      }\n      if (expanded) {\n        this.triggerEvent('open', changeItem);\n      } else {\n        this.triggerEvent('close', changeItem);\n      }\n      this.triggerEvent('change', name);\n      this.triggerEvent('input', name);\n    },\n  },\n});\n"]}