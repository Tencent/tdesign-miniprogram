{"version":3,"sources":["../src/drawer/drawer.ts"],"names":[],"mappings":"AAAA,OAAO,UAAU,MAAM,qBAAqB,CAAC;AAE7C,MAAM,cAAc,GAAG;IACrB,KAAK,EAAE,KAAK;IACZ,MAAM,EAAE,KAAK;IACb,KAAK,EAAE,KAAK;CACb,CAAC;AACF,UAAU,CAAC;IACT,UAAU,EAAE;QACV,OAAO,EAAE,OAAO;QAChB,QAAQ,EAAE;YACR,IAAI,EAAE,OAAO;YACb,KAAK,EAAE,IAAI;SACZ;QACD,IAAI,EAAE;YACJ,IAAI,EAAE,MAAM;YACZ,aAAa,EAAE,CAAC,MAAM,CAAC;YACvB,KAAK,EAAE,OAAO;SACf;QACD,QAAQ,EAAE;YACR,IAAI,EAAE,MAAM;YACZ,KAAK,EAAE,MAAM,EAAE,8BAA8B;SAC9C;QACD,OAAO,EAAE;YACP,IAAI,EAAE,KAAK;YACX,KAAK,EAAE,EAAE;SACV;KACF;IACD,IAAI,EAAE;QACJ,UAAU,EAAE,EAAE;KACf;IACD,SAAS,EAAE;QACT,IAAI,CAAC,GAAG;YACN,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;QAC5B,CAAC;KACF;IACD,QAAQ,KAAI,CAAC;IACb,OAAO,EAAE;QACP;;;WAGG;QACH,eAAe,CAAC,IAAI;YAClB,IAAI,UAAU,GAAG,EAAE,CAAC;YACpB,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;gBAC5B,UAAU,GAAG,GAAG,IAAI,KAAK,CAAC;aAC3B;YACD,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;gBAC5B,MAAM,KAAK,GAAG,YAAY,CAAC;gBAC3B,MAAM,UAAU,GAAG,WAAW,CAAC;gBAC/B,MAAM,UAAU,GACd,IAAI,CAAC,UAAU,CAAC,QAAQ,KAAK,MAAM,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,KAAK,OAAO,CAAC;gBAE9E,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;oBACpB,UAAU,GAAG,IAAI,CAAC;iBACnB;qBAAM,IAAI,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;oBAChC,MAAM,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;oBAClC,UAAU,GAAG,UAAU;wBACrB,CAAC,CAAC,gBAAgB,MAAM,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG;wBACtC,CAAC,CAAC,gBAAgB,MAAM,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;iBAC1C;qBAAM;oBACL,MAAM,UAAU,GAAG,cAAc,CAAC,IAAI,CAAC,IAAI,KAAK,CAAC;oBACjD,MAAM,GAAG,GAAG,UAAU,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;oBACxC,UAAU,GAAG,UAAU;wBACrB,CAAC,CAAC,gBAAgB,MAAM,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG;wBACtC,CAAC,CAAC,gBAAgB,MAAM,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;iBAC1C;aACF;YACD,IAAI,CAAC,OAAO,CAAC;gBACX,UAAU;aACX,CAAC,CAAC;QACL,CAAC;QACD,OAAO,CAAC,CAAC;YACP,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,OAAO,CAAC;gBACX,OAAO,EAAE,KAAK;aACf,CAAC,CAAC;QACL,CAAC;QACD,cAAc,CAAC,CAAC;YACd,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;YACrC,IAAI,CAAC,OAAO,CAAC;gBACX,OAAO,EAAE,KAAK;aACf,CAAC,CAAC;QACL,CAAC;KACF;CACF,CAAC,CAAC","file":"drawer.js","sourcesContent":["import TComponent from '../common/component';\n\nconst sizeKeywordMap = {\n  small: '30%',\n  middle: '50%',\n  large: '70%',\n};\nTComponent({\n  properties: {\n    visible: Boolean,\n    closeBtn: {\n      type: Boolean,\n      value: true,\n    },\n    size: {\n      type: String, // large/middle/small/300px/500px/80%/50%/120/150\n      optionalTypes: [Number],\n      value: 'large',\n    },\n    position: {\n      type: String,\n      value: 'left', // top | bottom | left | right\n    },\n    sidebar: {\n      type: Array,\n      value: [],\n    },\n  },\n  data: {\n    drawerSize: '',\n  },\n  observers: {\n    size(val) {\n      this._calcDrawerSize(val);\n    },\n  },\n  attached() {},\n  methods: {\n    /**\n     * @description size的值可传large/middle/small/300px/500px/80%/50%/120/150, 将传入的size根据不同模式做相应转换\n     * @param size\n     */\n    _calcDrawerSize(size) {\n      let drawerSize = '';\n      if (typeof size === 'number') {\n        drawerSize = `${size}px;`;\n      }\n      if (typeof size === 'string') {\n        const pxReg = /[0-9]+px$/g;\n        const percentReg = /[0-9]+%$/g;\n        const isVerticle =\n          this.properties.position === 'left' || this.properties.position === 'right';\n\n        if (pxReg.test(size)) {\n          drawerSize = size;\n        } else if (percentReg.test(size)) {\n          const val = size.replace('%', '');\n          drawerSize = isVerticle\n            ? `calc(100vw * ${Number(val) / 100})`\n            : `calc(100vh * ${Number(val) / 100})`;\n        } else {\n          const currentVal = sizeKeywordMap[size] || '70%';\n          const val = currentVal.replace('%', '');\n          drawerSize = isVerticle\n            ? `calc(100vw * ${Number(val) / 100})`\n            : `calc(100vh * ${Number(val) / 100})`;\n        }\n      }\n      this.setData({\n        drawerSize,\n      });\n    },\n    onClose(e) {\n      this.triggerEvent('close', e);\n      this.setData({\n        visible: false,\n      });\n    },\n    onClickOverlay(e) {\n      this.triggerEvent('clickOverlay', e);\n      this.setData({\n        visible: false,\n      });\n    },\n  },\n});\n"]}