{"version":3,"sources":["../src/steps/step-item.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,WAAW,EAAE,cAAc,EAAoB,MAAM,qBAAqB,CAAC;AACpF,OAAO,MAAM,MAAM,kBAAkB,CAAC;AACtC,OAAO,KAAK,MAAM,mBAAmB,CAAC;AAEtC,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,CAAC;AAG1B,IAAqB,QAAQ,GAA7B,MAAqB,QAAS,SAAQ,cAAc;IAApD;;QACE,YAAO,GAAG;YACR,aAAa,EAAE,IAAI;SACpB,CAAC;QAEF,cAAS,GAAqB;YAC5B,SAAS,EAAE;gBACT,IAAI,EAAE,UAAU;aACjB;SACF,CAAC;QAEF,oBAAe,GAAG;YAChB,GAAG,MAAM,QAAQ;YACjB,GAAG,MAAM,gBAAgB;YACzB,GAAG,MAAM,cAAc;YACvB,GAAG,MAAM,oBAAoB;YAC7B,GAAG,MAAM,cAAc;SACxB,CAAC;QAEF,eAAU,GAAG,KAAK,CAAC;QAEnB,UAAU;QACV,SAAI,GAAG;YACL,WAAW,EAAE,GAAG,MAAM,aAAa;YACnC,MAAM;YACN,aAAa,EAAE,EAAE;YACjB,MAAM,EAAE,IAAI;YACZ,KAAK,EAAE,CAAC;YACR,KAAK,EAAE,KAAK;YACZ,SAAS,EAAE,EAAE;YACb,MAAM,EAAE,UAAU;YAClB,IAAI,EAAE,SAAS;YACf,WAAW,EAAE,KAAK;YAClB,OAAO,EAAE,KAAK;YACd,QAAQ,EAAE,KAAK;YACf,YAAY,EAAE,EAAE;SACjB,CAAC;QAEF,cAAS,GAAG;YACV,IAAI,CAAC,GAAG;gBACN,IAAI,CAAC,OAAO,CAAC;oBACX,YAAY,EAAE,GAAG;iBAClB,CAAC,CAAC;YACL,CAAC;YACD,SAAS,CAAC,GAAG;gBACX,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;oBACtB,IAAI,GAAG,KAAK,QAAQ,EAAE;wBACpB,IAAI,CAAC,OAAO,CAAC;4BACX,YAAY,EAAE,OAAO;yBACtB,CAAC,CAAC;qBACJ;yBAAM,IAAI,GAAG,KAAK,OAAO,EAAE;wBAC1B,IAAI,CAAC,OAAO,CAAC;4BACX,YAAY,EAAE,OAAO;yBACtB,CAAC,CAAC;qBACJ;iBACF;YACH,CAAC;SACF,CAAC;QAEF,cAAS,GAAG;YACV,KAAK;gBACH,MAAM,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;gBAExD,IAAI,MAAM,EAAE;oBACV,IAAI,CAAC,OAAO,CAAC;wBACX,MAAM;qBACP,CAAC,CAAC;iBACJ;YACH,CAAC;SACF,CAAC;QAEF,YAAO,GAAG;YACR,YAAY,CAAC,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,QAAQ;gBACzD,MAAM,EAAE,MAAM,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC;gBAC7B,IAAI,SAAS,GAAG,MAAM,CAAC;gBAEvB,IAAI,SAAS,KAAK,SAAS,EAAE;oBAC3B,IAAI,KAAK,GAAG,OAAO,EAAE;wBACnB,0CAA0C;wBAC1C,SAAS,GAAG,QAAQ,CAAC;wBACrB,2BAA2B;qBAC5B;yBAAM,IAAI,KAAK,IAAI,OAAO,EAAE;wBAC3B,6BAA6B;wBAC7B,SAAS,GAAG,SAAS,CAAC;qBACvB;yBAAM,IAAI,QAAQ,EAAE;wBACnB,yBAAyB;wBACzB,SAAS,GAAG,MAAM,CAAC;qBACpB;iBACF;gBAED,IAAI,CAAC,OAAO,CAAC;oBACX,SAAS,EAAE,SAAS;oBACpB,KAAK;oBACL,KAAK,EAAE,KAAK,KAAK,KAAK,IAAI,MAAM,KAAK,UAAU;oBAC/C,MAAM;oBACN,KAAK;oBACL,WAAW,EAAE,KAAK,CAAC,MAAM,GAAG,CAAC,KAAK,KAAK;iBACxC,CAAC,CAAC;YACL,CAAC;YACD,KAAK;gBACH,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAChD,CAAC;SACF,CAAC;IACJ,CAAC;CAAA,CAAA;AAvGoB,QAAQ;IAD5B,WAAW,EAAE;GACO,QAAQ,CAuG5B;eAvGoB,QAAQ","file":"step-item.js","sourcesContent":["import { wxComponent, SuperComponent, RelationsOptions } from '../common/src/index';\nimport config from '../common/config';\nimport props from './step-item-props';\n\nconst { prefix } = config;\n\n@wxComponent()\nexport default class StepItem extends SuperComponent {\n  options = {\n    multipleSlots: true,\n  };\n\n  relations: RelationsOptions = {\n    './steps': {\n      type: 'ancestor',\n    },\n  };\n\n  externalClasses = [\n    `${prefix}-class`,\n    `${prefix}-class-content`,\n    `${prefix}-class-title`,\n    `${prefix}-class-description`,\n    `${prefix}-class-extra`,\n  ];\n\n  properties = props;\n\n  // 组件的内部数据\n  data = {\n    classPrefix: `${prefix}-steps-item`,\n    prefix,\n    rootClassName: '',\n    parent: null,\n    index: 0,\n    isDot: false,\n    curStatus: '',\n    layout: 'vertical',\n    type: 'default',\n    isLastChild: false,\n    isLarge: false,\n    readonly: false,\n    computedIcon: '',\n  };\n\n  observers = {\n    icon(val) {\n      this.setData({\n        computedIcon: val,\n      });\n    },\n    curStatus(val) {\n      if (this.data.readonly) {\n        if (val === 'finish') {\n          this.setData({\n            computedIcon: 'check',\n          });\n        } else if (val === 'error') {\n          this.setData({\n            computedIcon: 'close',\n          });\n        }\n      }\n    },\n  };\n\n  lifetimes = {\n    ready() {\n      const [parent] = this.getRelationNodes('./steps') || [];\n\n      if (parent) {\n        this.setData({\n          parent,\n        });\n      }\n    },\n  };\n\n  methods = {\n    updateStatus(current, index, theme, layout, steps, readonly) {\n      const { status } = this.data;\n      let newStatus = status;\n\n      if (newStatus === 'default') {\n        if (index < current) {\n          // 1. 本步骤序号小于当前步骤并且没有设定任何步骤序号，设定状态为 finish\n          newStatus = 'finish';\n          // eslint-disable-next-line\n        } else if (index == current) {\n          // 2. 本步骤序号等于当前步骤. 默认为process\n          newStatus = 'process';\n        } else if (readonly) {\n          // 3. 本步骤序号大于当前步骤，默认为wait\n          newStatus = 'wait';\n        }\n      }\n\n      this.setData({\n        curStatus: newStatus,\n        index,\n        isDot: theme === 'dot' && layout === 'vertical',\n        layout,\n        theme,\n        isLastChild: steps.length - 1 === index,\n      });\n    },\n    click() {\n      this.data.parent.handleClick(this.data.index);\n    },\n  };\n}\n"]}