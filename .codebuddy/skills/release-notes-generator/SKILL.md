---
name: release-notes-generator
description: "📝 Release Notes 生成器 - 从 Changelog 生成用户友好的发版说明"
---

# 📝 Release Notes 生成器

从 CHANGELOG.md 提取变更内容，生成面向用户的 Release Notes，并保存到 `docs/release-notes/` 目录。

## 🎯 核心原则

| 维度 | Changelog | Release Notes |
|-----|----------|---------------|
| **受众** | 开发者 | 终端用户 |
| **内容** | 技术细节、代码变更 | 功能价值、用户体验 |
| **语言** | 技术术语 | 通俗易懂 |
| **详细度** | 详尽完整 | 精炼重点 |

### 转换原则

| ❌ 不要包含 | ✅ 应该强调 |
|-------------|-------------|
| 内部实现细节 | 用户可见的新功能 |
| 代码重构信息 | 用户体验改进 |
| 依赖库升级 | 性能提升效果 |
| 开发工具变更 | Bug 修复带来的价值 |
| 测试相关改动 | 使用场景和收益 |
| 文件路径、类名、函数名 | - |

## 📋 执行步骤

### 1. 读取 Changelog 内容

从 CHANGELOG.md 提取最新版本的变更内容：

```bash
sed -n '/## \[/,/## \[/p' CHANGELOG.md | head -n -1
```

### 2. 分析变更并转换

将 Changelog 中的技术描述转换为用户友好的表述。

**分类映射**：

| Changelog 分类 | Release Notes 分类 |
|---------------|-------------------|
| 🎉 新功能 | ✨ 新功能 |
| 🔧 功能改进 | 🔧 改进优化 |
| 🐛 Bug修复 | 🐛 问题修复 |
| 📝 文档更新 | -（通常不包含） |
| ⚡ 性能优化 | 🔧 改进优化 |

### 3. 生成 Release Notes 内容

**格式模板**：

```markdown
# 🚀 CodeBuddy Code v{版本号} 发布

## ✨ 新功能

- 功能名称：简短描述功能价值和用户收益

## 🔧 改进优化

- 改进点名称：描述改进后的用户体验提升

## 🐛 问题修复

- 问题描述：说明修复后带来的稳定性或体验改善
```

**格式要求**：
- 标题：`# 🚀 CodeBuddy Code v{版本号} 发布`
- 分类：`## ✨ 新功能` / `## 🔧 改进优化` / `## 🐛 问题修复`
- 列表项：`- 功能名称：描述内容`（冒号前不加粗）
- 价值导向：强调用户收益而非技术实现
- 语言简洁：避免技术术语，使用通俗表述
- 数量控制：每个分类 1-8 项
- 无底部信息：不添加分隔线和发布日期

### 4. 保存到文件

文件路径：`docs/release-notes/v{版本号}.md`

**注意**：
- 如果 `docs/release-notes/` 目录不存在，先创建
- 文件名使用版本号，带 `v` 前缀
- 使用 UTF-8 编码

### 5. 更新 Release Notes 索引

如果存在 `docs/release-notes/README.md`，在开头添加新版本链接：

```markdown
# Release Notes

## 最新版本

- [v2.4.0](./v2.4.0.md) - 2025-11-14

## 历史版本

- [v2.3.0](./v2.3.0.md) - 2025-11-13
```

## ⚠️ 注意事项

1. **过滤内部变更**：文档更新、测试改进、构建优化等不要写入 Release Notes
2. **合并同类项**：多个相关的小改进可以合并为一个条目
3. **突出价值**：每个条目都要回答「这对用户有什么好处？」
4. **避免技术术语**：如果必须使用，需要解释含义
5. **遵循排版规范**：中英文空格、标点符号等

## 📊 输出示例

```markdown
## Release Notes 生成报告

**版本号**：v2.4.0
**发布日期**：2025-11-14

**生成内容预览**：

---
# 🚀 CodeBuddy Code v2.4.0 发布

## ✨ 新功能

- 交互式问答：AI 助手可以在执行任务时主动提问，支持多选和自定义输入

## 🔧 改进优化

- 沙箱环境增强：优化远程执行环境的目录管理，提升协作灵活性
- Web 搜索升级：提升搜索功能的稳定性和响应速度

## 🐛 问题修复

- 管道输入稳定性：修复命令行管道输入时内容丢失的问题
---

**保存位置**：docs/release-notes/v2.4.0.md
**索引已更新**：docs/release-notes/README.md
```

## 输出要求

1. 展示生成的 Release Notes 预览（前 100 行）
2. 说明文件保存位置
3. 确认索引是否已更新
4. 统计各分类的条目数量
5. 如有被过滤的条目，说明原因
