<wxs src="../common/utils.wxs" module="_" />
<wxs src="./rate.wxs" module="utils" />

<view class="{{classPrefix}}">
  <view
    class="{{classPrefix}}__wrapper {{prefix}}-class"
    style="font-size:{{ size }}px;"
    catch:touchmove="{{ !disabled ? 'onTouchMove' : '' }}"
    catch:touchstart="{{ !disabled ? 'onTouchStart' : '' }}"
  >
    <t-icon
      wx:for="{{ count }}"
      wx:key="*this"
      class="{{classPrefix }}__icon {{utils.getIconClass(classPrefix + '__icon', defaultValue, value, index, allowHalf, disabled)}} "
      t-class="{{prefix}}-class-icon"
      name="{{utils.getIconName(defaultValue, value, index, variant, icon)}}"
      size="{{ size }}"
      style="margin-right:{{ count - index > 1 ? gap : 0 }}px;"
    />
  </view>
  <text wx:if="{{showText}}" class="{{_.cls(classPrefix + '__text', [['active', value > 0]])}} {{prefix}}-class-text"
    >{{utils.getText(texts,value,defaultTexts)}}</text
  >
  <view wx:if="{{tipsVisible}}" class="{{classPrefix}}__tips">
    <view wx:if="{{allowHalf}}" class="{{classPrefix}}__tips-item {{classPrefix}}__tips-item--active">
      <t-icon
        class="{{classPrefix }}__icon {{classPrefix }}__icon--selected"
        name="{{utils.getIconName(defaultValue, value, index, variant, icon)}}"
        size="{{ size }}"
      />
      <view class="{{classPrefix}}__tips-text">{{value - 0.5}}</view>
    </view>
    <view class="{{classPrefix}}__tips-item">
      <t-icon
        class="{{classPrefix }}__icon {{classPrefix }}__icon--selected"
        name="{{utils.getIconName(defaultValue, value, index, variant, icon)}}"
        size="{{ size }}"
      />
      <view class="{{classPrefix}}__tips-text">{{value}}</view>
    </view>
  </view>
</view>
